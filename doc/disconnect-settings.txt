TASKS
- test from scratch again

TODO AFTER initial merge
- make UI for making grades active if there isn't one already (this can be independent of the other stuff)
- update school selector on teacher page to handle case of no imported states better
- try to break jnlp code. one case that I think breaks it, is if the jnlp object is cached and the set of families are changed there seems to be some weakness there.

COMPLETED
- tested what happens when jnlp file cache is cleared: the database is still used so everything works as before, what could problematic is if a new snapshot is released and the cache is cleared. But I'm going to punt on this.
- refactor states_and_provinces into the StatesAndProvinces module so things don't access the setting directly
- review the usage of state_and_provinces to figure out if that can be simplified
- switch state importing to use 'all' symbol
- remove enable_default_users setting
- add status info to admin home screen about default users, and rake tasks to enable and disable them
- update the UI to have flag for "active"
- 'new' action of admin project needs to be updated
- after merging in updates from Aaron and rails3.0, need to rerun tests and some of the manual checks below
- check initial app setup
- do not optimize jnlp lookups because they just make things more complicated
- leave the current approach to so the snapshot jnlp is updated when ever jnlps are worked with, it will no longer update the snapshot when the default project is updated because that doesn't happen anymore.
- look for references to the project model for the maven information and see if they can go through the jnlp adapter instead
- check all references to current_project
- check all references to static Admin::Project to make sure they are still valid
- create migration to strip no longer used properties from database and replace the accessors in the model with ones that read from the settings, also this should add in some 'active' flag to the project model which is used to to find the active one instead of linking url and name
-- remove name
-- remove url
-- remove enable_default_users
-- remove states_and_provences
-- remove maven_jnlp_server_id
-- remove maven_jnlp_family_id
-- remove jnlp_version_str
-- remove snapshot_enabled
-- add active

STILL need to check
- check if anything is writing into the states_and_provences in the model
- what to do with the maven_jnlp db stuff:
   t.integer  "maven_jnlp_server_id"
    t.integer  "maven_jnlp_family_id"
    t.string   "jnlp_version_str"
    t.boolean  "snapshot_enabled"
-- that is duplicated by the settings: 
--- default_maven_jnlp
-- additionally there are settings which list the families and servers, and it is those lists that are imported at some point and then there are references in the project model to the active server, family, and version
-- the clean thing to do would be to remove the db fields and just use the settings file for this, in which case we might need to optimize some of the lookups 
- check for references to settings that will be removed:
-- description

NOT planning to do
- add states and provinces checking on settings load similar to old validations in project model
- add url checking when loading settings (this was done by project model validation)
- tests of the settings and project model????
-- it would be nice to have a test that setups up a portal from scratch with a fixed settings.yml and a clean database and then checks the settings file and checks the portal.

NOTES
:default_maven_jnlp is accessed by:
 - project model
 - setup.rb
:maven_jnlp_servers is accessed by:
 - project model
 - maven_jnlp_server model
 - setup.rb
 - jnlp rake task
:maven_jnlp_families is accessed by:
 - maven_jnlp_server model
 - setup.rb
 - jnlp rake task
